<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voxel World - Minecraft Clone</title>
    <link rel="stylesheet" href="/src/styles/index.css">
    <link rel="icon" href="/favicon.ico" />
</head>

<body>
    <div id="game-container" tabindex="0"></div>

    <div id="crosshair"></div>

    <!-- Damage overlay for visual feedback -->
    <div id="damage-overlay"></div>

    <!-- Visual Improvements: Vignette -->
    <div id="vignette-overlay"></div>

    <!-- HMR Update Notifications -->
    <div id="hmr-notifications"></div>

    <!-- Mobile Orientation Warning -->
    <div id="landscape-warning" class="hidden">
        <div class="warning-content">
            <div class="rotate-icon">‚ü≥</div>
            <h2>Please Rotate Device</h2>
            <p>This experience is best viewed in landscape mode.</p>
        </div>
    </div>

    <!-- Status Bars Container -->
    <div id="status-bars">
        <div id="health-bar">
            <div id="health-hearts"></div>
        </div>
        <div id="hunger-bar">
            <div id="hunger-drumsticks"></div>
        </div>
    </div>

    <div id="hud">
        <div id="hotbar">
            <!-- Dynamically generated -->
        </div>
    </div>

    <div id="inventory-screen" class="hidden">
        <div class="inventory-container">
            <div id="crafting-area">
                <div class="inventory-label">Crafting</div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div class="crafting-grid">
                        <!-- Dynamically generated 9 slots -->
                    </div>
                    <div class="crafting-arrow">‚ûú</div>
                    <div class="crafting-result-container">
                        <div class="crafting-result"></div>
                    </div>
                </div>
            </div>

            <div class="inventory-label">Inventory</div>
            <div id="main-inventory-grid" class="inventory-grid">
                <!-- Dynamically generated 27 slots -->
            </div>

            <div class="inventory-label">Hotbar</div>
            <div id="hotbar-inventory-grid" class="inventory-grid">
                <!-- Dynamically generated 9 slots -->
            </div>
        </div>
    </div>

    <div id="drag-icon" class="hidden"></div>

    <div id="fps-counter">FPS: <span id="fps">0</span></div>
    <button id="settings-btn"
        style="position: fixed; top: 10px; right: 300px; padding: 5px 10px; background: rgba(0,0,0,0.5); color: white; border: 1px solid white; cursor: pointer; z-index: 2100; font-size: 16px;">‚öôÔ∏è</button>

    <!-- Settings Modal -->
    <div id="settings-modal" class="hidden">
        <div class="settings-modal-content">
            <div class="settings-header">
                <h3>‚öôÔ∏è Settings</h3>
                <button id="settings-close">√ó</button>
            </div>
            <div class="settings-body">
                <!-- Audio Settings -->
                <div class="settings-section">
                    <h4>üîä Audio</h4>
                    <label class="settings-toggle">
                        <input type="checkbox" id="settings-audio-toggle" checked>
                        <span>Sound Effects</span>
                    </label>
                </div>

                <!-- Display Settings -->
                <div class="settings-section">
                    <h4>üìä Display</h4>
                    <label class="settings-toggle">
                        <input type="checkbox" id="settings-fps-toggle" checked>
                        <span>FPS Counter</span>
                    </label>
                    <label class="settings-toggle">
                        <input type="checkbox" id="settings-position-toggle" checked>
                        <span>Position Display</span>
                    </label>
                    <label class="settings-toggle">
                        <input type="checkbox" id="settings-mobile-toggle">
                        <span>Mobile Controls</span>
                    </label>
                </div>

                <!-- Hotkey Settings -->
                <div class="settings-section">
                    <h4>‚å®Ô∏è Hotkeys</h4>
                    <p class="settings-description">Click a key box and press a key to reassign.</p>
                    <label class="settings-hotkey">
                        <span>Use Item / Interact</span>
                        <input type="text" id="settings-hotkey-secondary" class="hotkey-input" readonly value="E">
                    </label>
                </div>

                <!-- AI Settings -->
                <div class="settings-section">
                    <h4>ü§ñ AI Chat</h4>
                    <label class="settings-toggle">
                        <input type="checkbox" id="settings-ai-streaming-toggle">
                        <span>Streaming Mode (text streams in real-time)</span>
                    </label>

                </div>

                <!-- World Settings -->
                <div class="settings-section">
                    <h4>üåç World</h4>
                    <label class="settings-toggle">
                        <input type="checkbox" id="settings-persistence-toggle">
                        <span>Creature Persistence (Save/Load Animals)</span>
                    </label>
                    <p class="settings-description">Reset the world to regenerate terrain and clear all placed blocks,
                        creatures, and signs.</p>
                    <button id="reset-world-btn" class="danger-btn">üóëÔ∏è Reset World</button>
                </div>
            </div>
        </div>
    </div>

    <div id="debug">
        <p>v1.0.961</p>
        <p>Position: <span id="position">0, 0, 0</span></p>
        <p>Blocks: <span id="block-count">0</span></p>
    </div>

    <!-- Toggleable Debug Panel for Performance Isolation -->
    <div id="debug-panel" class="hidden">
        <h3>Debug Settings</h3>
        <label><input type="checkbox" id="dbg-animals" checked> Update Animals</label>
        <label><input type="checkbox" id="dbg-chunks" checked> Update Chunks</label>
        <label><input type="checkbox" id="dbg-env" checked> Day/Night Cycle</label>
        <label><input type="checkbox" id="dbg-particles" checked> Particles (Fire/etc)</label>
        <p class="hint">Press 'P' to toggle panel</p>
    </div>

    <div id="block-indicator">
        Selected: <span id="selected-block">Grass</span>
    </div>

    <!-- AI Chat Side Panel -->
    <div id="chat-panel" class="hidden">
        <div class="chat-header">
            <div class="chat-title">AI ASSISTANT</div>
            <button id="copy-chat" title="Copy Conversation"
                style="background: none; border: none; font-size: 20px; cursor: pointer; color: #fff; margin-right: 10px;">üìã</button>
            <button id="close-chat">√ó</button>
        </div>
        <div id="chat-messages">
            <!-- Messages will be added here -->
            <div class="message ai">
                <div class="message-content">Hello! I am ready. Press 'T' to toggle this panel.</div>
            </div>
            <!-- Stop Button (hidden by default) -->
            <div id="chat-stop-container" class="hidden"
                style="display: none; justify-content: center; margin-bottom: 10px;">
                <button id="stop-generation-btn"
                    style="background: rgba(255, 68, 68, 0.2); border: 1px solid #ff4444; color: #ff4444; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-family: 'VT323', monospace; font-size: 16px;">
                    ‚èπ Stop Generating
                </button>
            </div>
        </div>
        <div class="chat-input-container">
            <input type="text" id="chat-input" placeholder="Type a message..." autocomplete="off">
            <button id="send-chat">Send</button>
        </div>
    </div>



    <script type="module" src="/src/main.js"></script>
</body>

</html>