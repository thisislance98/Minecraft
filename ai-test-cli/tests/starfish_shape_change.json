{
    "name": "Create Starfish with Shape Change",
    "prompt": "Create a new creature called Starfish with a star-shaped body. Then patch it to change its shape to a sphere. IMPORTANT: When patching, you MUST use 'window.THREE' instead of 'THREE' to access geometries, as strict mode prevents global access.",
    "expectedTool": "patch_entity",
    "headless": false,
    "toolWait": 35000,
    "verify": [
        {
            "type": "customCode",
            "code": "() => { const game = window.__VOXEL_GAME__; const starfish = game.animals.find(a => a.constructor.name === 'Starfish'); if (!starfish) return { success: false, message: 'No Starfish found' }; if (!starfish.mesh) return { success: false, message: 'Starfish has no mesh' }; let geom = starfish.mesh.geometry; if (!geom && starfish.mesh.children.length > 0) { const child = starfish.mesh.children.find(c => c.geometry); if (child) geom = child.geometry; } if (!geom) return { success: false, message: 'Starfish has no mesh/geometry' }; const vertexCount = geom.attributes.position ? geom.attributes.position.count : 0; const geomType = geom.type || 'unknown'; if (!geom.boundingBox) geom.computeBoundingBox(); const bbox = geom.boundingBox; const width = bbox ? (bbox.max.x - bbox.min.x).toFixed(2) : 'unknown'; const height = bbox ? (bbox.max.y - bbox.min.y).toFixed(2) : 'unknown'; const depth = bbox ? (bbox.max.z - bbox.min.z).toFixed(2) : 'unknown'; return { success: true, message: `Starfish geometry: type=${geomType}, vertices=${vertexCount}, size=${width}x${height}x${depth}` }; }"
        }
    ],
    "timeout": 120000
}